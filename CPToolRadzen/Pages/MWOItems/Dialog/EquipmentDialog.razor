@using CPTool.Application.Features.BrandFeatures.CreateEdit;
@using CPTool.Application.Features.EquipmentItemFeatures.CreateEdit;
@using CPTool.Application.Features.EquipmentTypeFeatures.CreateEdit;
@using CPTool.Application.Features.EquipmentTypeSubFeatures.CreateEdit;
@using CPTool.Application.Features.SupplierFeatures.CreateEdit;
@using CPToolRadzen.Pages.EquipmentType.Dialog;
@if (debug)
{

}
<Panel>
    <Left>
        <RadzenCard>
            <SelectTemplate T="EditEquipmentType" Elements="@RadzenTables.EquipmentTypes"
                            Label="Type" Change=@ChangeEquipmentType
                            PropertyName="Name" @bind-Model=@Model.eEquipmentType>

            </SelectTemplate>
            <SelectTemplate T="EditEquipmentTypeSub" Elements="@RadzenTables.EquipmentTypeSubs"
                            Label="Type"
                            Filter=@(x => x.EquipmentTypeId == Model.eEquipmentType.Id)
                            PropertyName="Name" Disabled=@(Model.eEquipmentType.Id==0)
                            @bind-Model=@Model.eEquipmentTypeSub>

            </SelectTemplate>

          <TextBoxTemplate Required=true @bind-Value=@Model.TagNumber Label="Tag Number">

            </TextBoxTemplate>


            <FieldTemplate Label="Tag Id" Value=@Model.TagId></FieldTemplate>
            <TextBoxTemplate @bind-Value="@Model.Model"
                             Label="Equipment Model"
                             Rows="3"></TextBoxTemplate>
            <TextBoxTemplate @bind-Value="@Model.Reference"
                             Label="Reference"
                             Rows="3"></TextBoxTemplate>
            <TextBoxTemplate @bind-Value="@Model.SerialNumber"
                             Label="Serial Number"></TextBoxTemplate>
        </RadzenCard>
    </Left>
    <Rigth>
        <RadzenCard>
            <SelectTemplate T="EditBrand" Elements="@RadzenTables.Brands" Label="Brand or Service" Change=@ChangeBrand
                            PropertyName="Name" @bind-Model=@Model.eBrand>

            </SelectTemplate>
            <SelectTemplate T="EditSupplier"
                            Elements="@((Model.eBrand==null||Model.eBrand.Id==0)?new():
RadzenTables.BrandSuppliers.Where(x=>x.Brand.Id==Model.eBrand.Id).Select(y=>y.Supplier).ToList())" Label="Supplier"
                            Disabled=@(Model.eBrand==null||Model.eBrand.Id==0)
                            PropertyName="Name" @bind-Model=@Model.eSupplier>

            </SelectTemplate>
            <SelectTemplate T="EditGasket" Elements="@RadzenTables.Gaskets" Label="Gasket" 
                            PropertyName="Name" @bind-Model=@Model.eGasket>

            </SelectTemplate>
            <SelectTemplate T="EditMaterial" Elements="@RadzenTables.Materials" Label="Outer Material"
                            PropertyName="Name" @bind-Model=@Model.eOuterMaterial>

            </SelectTemplate>
            <SelectTemplate T="EditMaterial" Elements="@RadzenTables.Materials" Label="Inner Material"
                            PropertyName="Name" @bind-Model=@Model.eInnerMaterial>

            </SelectTemplate>
          
           

        </RadzenCard>
    </Rigth>
</Panel>

@code {
    bool debug = true;
    public Func<EditEquipmentTypeSub, bool> FilterEquipmentTypeSub => x => x.EquipmentTypeId == Model.eEquipmentType.Id;
}
