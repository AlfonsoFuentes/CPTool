@page "/mwo-items/{ParentId:int}"
@using CPTool.Application.Features.MWOItemFeatures.CreateEdit;
@inherits TableTemplate<EditMWOItem>


<TableTemplate T="EditMWOItem"
               TableName=@($"Items in {Parent.Name}")
              
               Filter="@(x => x.MWOId == ParentId)"
               @bind-SelectedItem=@SelectedItem
               @bind-GlobalElements="@RadzenTables.MWOItems"
               ShowDialog="ShowTableDialog"
              >

    <Columns>
        <RadzenDataGridColumn TItem="EditMWOItem" Property="@nameof(EditMWOItem.TagId)" Title="Tag Id" TextAlign="TextAlign.Left" Width="10%">
        </RadzenDataGridColumn>
        <RadzenDataGridColumn TItem="EditMWOItem" Property="@nameof(EditMWOItem.Name)" Title="Name" TextAlign="TextAlign.Left" Width="40%">
        </RadzenDataGridColumn>

        <RadzenDataGridColumn TItem="EditMWOItem" Property="@nameof(EditMWOItem.BudgetPrize)" Title="Budget, USD" Filterable=false Sortable=false>
            <Template Context="detail">
                @detail.BudgetPrize.ToString("C0")
            </Template>
            <FooterTemplate>
                <b>@SumBudget.ToString("C0")</b>
            </FooterTemplate>
        </RadzenDataGridColumn>

        <RadzenDataGridColumn TItem="EditMWOItem" Property="@nameof(EditMWOItem.Assigned)" Title="Assigned, USD" Filterable=false Sortable=false>
            <Template Context="detail">
                @detail.Assigned.ToString("C0")  
            </Template>
            <FooterTemplate>
                <b>@SumAssigned.ToString("C0")</b>
            </FooterTemplate>
        </RadzenDataGridColumn>
        <RadzenDataGridColumn TItem="EditMWOItem" Property="@nameof(EditMWOItem.Actual)" Title="Actual, USD" Filterable=false Sortable=false>
            <Template Context="detail">
                @detail.Actual.ToString("C0")
            </Template>
            <FooterTemplate>
                <b>@SumActual.ToString("C0")</b>
            </FooterTemplate>
           
        </RadzenDataGridColumn>
        <RadzenDataGridColumn TItem="EditMWOItem" Property="@nameof(EditMWOItem.Commitment)" Title="Commitment, USD" Filterable=false Sortable=false>
            <Template Context="detail">
                @detail.Commitment.ToString("C0")
            </Template>
            <FooterTemplate>
                <b>@SumCommitment.ToString("C0")</b>
            </FooterTemplate>
           
        </RadzenDataGridColumn>
        <RadzenDataGridColumn TItem="EditMWOItem" Property="@nameof(EditMWOItem.Pending)" Title="Pending, USD" Filterable=false Sortable=false>
            <Template Context="detail">
                @detail.Pending.ToString("C0")
            </Template>
            <FooterTemplate>
                <b>@SumPending.ToString("C0")</b>
            </FooterTemplate>
           
        </RadzenDataGridColumn>
    </Columns>
</TableTemplate>
@if(debug)
{
    
}
@code {
    bool debug = true;
}
