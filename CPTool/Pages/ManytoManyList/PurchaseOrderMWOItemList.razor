@using System.Globalization
@inherits CancellableComponent

@implements IDisposable
<PageTitle>@PageTitle</PageTitle>
<MudGrid>

    <MudItem xs="12" sm="@mastersm">
        <ComponentTableList ShowAddButton=false
                            TDTO="PurchaseOrderDTO" T="PurchaseOrder"
                            TableName=@MasterTableName
                            SearchFunc="SearchMaster"
                            Elements="@Masters"
                            OnShowDialogOverrided="ShowDialogMaster"
                            SelectedItem="@SelectedMaster"
                            OnRowClickEvent="RowMasterClicked">

            <OtherButtons>
                <MudTooltip Text="Downpayment">
                    <MudIconButton Icon="@Icons.Filled.CurrencyExchange" Color="Color.Inherit" Disabled=@(SelectedMaster.Id==0?true:false) Size="Size.Small" OnClick="AddDownPayment" />
                </MudTooltip>
                <MudTooltip Text="Restore List">
                    <MudIconButton Icon="@Icons.Outlined.Assignment" Color="Color.Inherit" Size="Size.Small" OnClick="ViewMasterList" />
                </MudTooltip>
            </OtherButtons>
            <ContextTh>
                <MudTh Style="width:40px">#</MudTh>
                <MudTh>Name</MudTh>
                <MudTh>Status</MudTh>
                <MudTh>PR</MudTh>
                <MudTh>PO</MudTh>
                <MudTh>Value</MudTh>
            </ContextTh>
            <ContextTd>
                <MudTd DataLabel="Id">@context.Id</MudTd>
                <MudTd DataLabel="Name">@context.Name</MudTd>
                <MudTd DataLabel="Status">@context.PurchaseOrderStatus.ToString()</MudTd>
                <MudTd DataLabel="PR">@context.PurchaseRequisition</MudTd>
                <MudTd DataLabel="PO">@context.PONumber</MudTd>
                <MudTd DataLabel="Value">@context.PrizeUSD.ToString(_en)</MudTd>
            </ContextTd>
        </ComponentTableList>
    </MudItem>


    <MudItem xs="12" sm="@detailsm">
        <ComponentTableList TDTO="MWOItemDTO"
                            T="MWOItem"
                            DisableAddButton=@(SelectedMaster.Id==0?true:false)
                            TableName=@DetailTableName
                            OnShowDialogOverrided="ShowDialogDetail"
                            Elements="@Details"
                            OnRowClickEvent="RowDetailClicked"
                            SelectedItem="@SelectedDetail">

            <OtherButtons>
                <MudTooltip Text="Restore List">
                    <MudIconButton Icon="@Icons.Outlined.Assignment" Color="Color.Inherit" Size="Size.Small" OnClick="ViewMasterList" />
                </MudTooltip>
            </OtherButtons>
            <ContextTh>
                <MudTh Style="width:40px">#</MudTh>
                <MudTh>Name</MudTh>

            </ContextTh>
            <ContextTd>
                <MudTd DataLabel="Id">@context.Id</MudTd>
                <MudTd DataLabel="Name">@context.Name</MudTd>

            </ContextTd>
        </ComponentTableList>
    </MudItem>

</MudGrid>
@code {
    public CultureInfo _en = CultureInfo.GetCultureInfo("en-US");

    string value = "";
   
    //Func
    //<string, bool> func = (string para) => { return Masters.Any(x=>x.PurchaseRequisition.Contains(para)); };
   

}
