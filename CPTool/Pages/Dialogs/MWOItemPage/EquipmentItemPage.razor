@inherits CancellableComponent
@implements IDisposable
@if (Visible)
{
    <MudGrid>
        <MudItem xs="12" sm="6">
            <ComponentAutoComplete Label="Equipment Type"
                               TDTO="EquipmentTypeDTO"
                               T="EquipmentType"
                               UpdateList="UpdateEquipmentType"
                               Validation="@(new Func<string, string>(ValidateEquipmentType))"
                               Manager=TablesService.ManEquipmentType
                               TableName="Equipment Type"
                               ObjectList=TablesService.ManEquipmentType.List
                               @bind-Model="@Model.EquipmentTypeDTO"
                               Required=true
                               ShowDialogOverrided=ToolDialogService.ShowEquipmentType>

            </ComponentAutoComplete>
            <ComponentAutoComplete Label="Sub Equipment Type"
                               TableName="Sub Equipment Type"
                               TDTO="EquipmentTypeSubDTO"
                               T="EquipmentTypeSub"
                          
                               UpdateList="UpdateEquipmentSubType"
                               Validation="@(new Func<string, string>(ValidateEquipmentSubType))"
                               @bind-Model="@Model.EquipmentTypeSubDTO"
                               Disable=@(Model.EquipmentTypeDTO.Id==0?true:false)
                               Manager=TablesService.ManEquipmentTypeSub
                               ObjectList=Model.EquipmentTypeDTO.EquipmentTypeSubDTOs
                               ShowDialogOverrided=ToolDialogService.ShowEquipmentTypeSub
                               Parent=@Model.EquipmentTypeDTO>

            </ComponentAutoComplete>




            <MudTextField T="string" @bind-Value="Model.TagNumber"
                      Required="true"
                      Immediate="true"
                      Label="Tag Number"
                      Margin="Margin.Dense"
                      Variant="Variant.Outlined"
                      RequiredError="Must have Tag Number"></MudTextField>

            <MudTextField T="string" Value="@Model.TagId"
                      Immediate="true"
                      Disabled="true"
                      Margin="Margin.Dense"
                      Variant="Variant.Outlined"
                      Label="Tag"></MudTextField>
            <ComponentAutoComplete Label="Gasket"
                               TableName="Gasket"
                               TDTO="GasketDTO"
                               T="Gasket"
                               UpdateList="UpdateGasket"
                               Validation="@(new Func<string, string>(ValidateGasket))"
                               Manager=TablesService.ManGasket
                               @bind-Model="@Model.GasketDTO"
                               ObjectList=TablesService.ManGasket.List>

            </ComponentAutoComplete>

            <ComponentAutoComplete Label="Outer Material"
                               TableName="Material"
                               TDTO="MaterialDTO"
                               T="Material"
                               UpdateList="UpdateMaterial"
                               Validation="@(new Func<string, string>(ValidateMaterial))"

                               ObjectList=TablesService.ManMaterial.List
                               ShowDialogOverrided=ToolDialogService.ShowMaterialDialog
                               Manager=TablesService.ManMaterial
                               @bind-Model="@Model.OuterMaterialDTO">

            </ComponentAutoComplete>
            <ComponentAutoComplete Label="Internal Material"
                               TableName="Material"
                               TDTO="MaterialDTO"
                               T="Material"
                               UpdateList="UpdateMaterial"
                               Validation="@(new Func<string, string>(ValidateMaterial))"
                               ObjectList=TablesService.ManMaterial.List
                               ShowDialogOverrided=ToolDialogService.ShowMaterialDialog
                               Manager=TablesService.ManMaterial
                               @bind-Model="@Model.InnerMaterialDTO">

            </ComponentAutoComplete>
        </MudItem>
        <MudItem xs="12" sm="6">

            <ComponentSelect TDTO="BrandDTO"
                         T="Brand"
                         Label="Brand or Service"
                         PostEvent=OnBrandValueChanged
                         Elements=TablesService.ManBrand.List
                         @bind-Model=@Model.BrandDTO>


            </ComponentSelect>
            <ComponentSelect TDTO="SupplierDTO"
                         T="Supplier"
                         Label="Supplier"
                         Disable="@(Model.BrandDTO.Id==0?true:false)"
                         Elements=@Model.BrandDTO.BrandSupplierDTOs.Select(x=>x.SupplierDTO).ToList()
                         @bind-Model=@Model.SupplierDTO>


            </ComponentSelect>


            <MudTextField T="string" @bind-Value="Model.Model"
                      Immediate="true"
                      Label="Model"
                      Margin="Margin.Dense"
                      Variant="Variant.Outlined"></MudTextField>
            <MudTextField T="string" @bind-Value="Model.Reference"
                      Immediate="true"
                      Label="Reference"
                      Margin="Margin.Dense"
                      Variant="Variant.Outlined"></MudTextField>
            <MudTextField T="string" @bind-Value="Model.SerialNumber"
                      Immediate="true"
                      Label="Serial Number"
                      Margin="Margin.Dense"
                      Variant="Variant.Outlined"></MudTextField>
        </MudItem>
    </MudGrid>
}

@code {


}
