@using CPTool.Application.Features.TaxCodeLDFeatures.CreateEdit
@using CPTool.Application.Features.TaxCodeLDFeatures.Query.GetById
@using CPTool.Application.Features.TaxCodeLDFeatures.Query.GetList
@using CPTool.Application.Features.TaxCodeLPFeatures.CreateEdit
@using CPTool.Application.Features.TaxCodeLPFeatures.Query.GetById
@using CPTool.Application.Features.TaxCodeLPFeatures.Query.GetList
@using CPTool.Application.Features.VendorCodeFeatures.CreateEdit
@using CPTool.Application.Features.VendorCodeFeatures.Query.GetById
@using CPTool.Application.Features.VendorCodeFeatures.Query.GetList
@if (debug)
{

}
<MudDialog DisableSidePadding="true">
    <DialogContent>
        <MudContainer Style="max-height: 550px; overflow-y: scroll" Fixed="true" MaxWidth="MaxWidth.Medium">
            <MudPaper Class="pa-2 ma-2" Outlined="true" Elevation="0">
                <CascadingValue Value="this">


                    <MudForm Model="Model" @ref="form">
                        <SelectComponent T="EditBrand"
                                         Elements=@GlobalTables.Brands
                                         Label="Brand or Service"
                                         @bind-Value="@Model.Brand">


                        </SelectComponent>
                        <MudTextField @bind-Value="Model.Supplier.Name"
                                      Variant="Variant.Outlined"
                                      Margin="Margin.Dense"
                                      Immediate="true"
                                      Label="Supplier Name"
                                      Required=true
                                      Validation="@(new Func<string, string>(ValidateSupplieName))" />




                        <MudTextField @bind-Value="@Model.Supplier.ContactPerson"
                                      Variant="Variant.Outlined"
                                      Margin="Margin.Dense"
                                      Immediate="true"
                                      Label="Contact person" />
                        <MudTextField @bind-Value="@Model.Supplier.Email"
                                      InputType="InputType.Email"
                                      Variant="Variant.Outlined"
                                      Margin="Margin.Dense"
                                      Immediate="true"
                                      Label="email" />
                        <MudTextField @bind-Value="@Model.Supplier.Phone"
                                      InputType="InputType.Telephone"
                                      Variant="Variant.Outlined"
                                      Margin="Margin.Dense"
                                      Immediate="true"
                                      Label="Phone" />
                        <MudTextField @bind-Value="@Model.Supplier.Address"
                                      Variant="Variant.Outlined"
                                      Margin="Margin.Dense"
                                      Immediate="true"
                                      Label="Address"></MudTextField>


                        <AutoCompleteComponent T="EditVendorCode"
                                               TAdd="AddVendorCode"
                                               TGedById="GetByIdVendorCodeQuery"
                                               TList="GetVendorCodeListQuery"
                                               TableName="Vendor Code"
                                               Label="Vendor Code"
                                               SelectionChanged="@((arg)=>{Model.Supplier.VendorCode=arg;})"
                                               ValidateForm="Validateform"
                                               @bind-Elements="@GlobalTables.VendorCodes"
                                               Validation="@(new Func<string, string>(ReviewVendorCode))"
                                               Model=@Model.Supplier.VendorCode></AutoCompleteComponent>
                        <AutoCompleteComponent T="EditTaxCodeLD"
                                               TAdd="AddTaxCodeLD"
                                               TGedById="GetByIdTaxCodeLDQuery"
                                               TList="GetTaxCodeLDListQuery"
                                               TableName="Tax Codel LD"
                                               Required=true
                                               Label="Tax Codel LD"
                                               ValidateForm="Validateform"
                                               SelectionChanged="@((arg)=>{Model.Supplier.TaxCodeLD=arg;})"
                                               @bind-Elements="@GlobalTables.TaxCodeLDs"
                                               Validation="@(new Func<string, string>(GlobalTables.ReviewTaxCodeLD))"
                                               Model=@Model.Supplier.TaxCodeLD></AutoCompleteComponent>
                        <AutoCompleteComponent T="EditTaxCodeLP"
                                               TAdd="AddTaxCodeLP"
                                               TGedById="GetByIdTaxCodeLPQuery"
                                               TList="GetTaxCodeLPListQuery"
                                               TableName="Tax Code LP"
                                               Label="Tax Code LP"
                                               ValidateForm="Validateform"
                                               Required=true
                                               SelectionChanged="@((arg)=>{Model.Supplier.TaxCodeLP=arg;})"
                                               @bind-Elements="@GlobalTables.TaxCodeLPs"
                                               Validation="@(new Func<string, string>(GlobalTables.ReviewTaxCodeLP))"
                                               Model=@Model.Supplier.TaxCodeLP></AutoCompleteComponent>


                    </MudForm>
                </CascadingValue>

            </MudPaper>
        </MudContainer>
    </DialogContent>
    <DialogActions>

        <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="ml-auto" OnClick="Submit">Save</MudButton>

        <MudButton Variant="Variant.Filled" DisableElevation="true" OnClick="Cancel">Cancel</MudButton>
    </DialogActions>
</MudDialog>
@code {
    bool debug = true;
}
