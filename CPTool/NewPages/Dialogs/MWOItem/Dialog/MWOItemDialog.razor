@using CPTool.Application.Features.NozzleFeatures.CreateEdit
@using CPTool.Application.Features.NozzleFeatures
@using CPTool.Application.Features.NozzleFeatures.Query.GetById
@using CPTool.Application.Features.NozzleFeatures.Query.GetList
@using CPTool.NewPages.Dialogs.Nozzle.List
<MudDialog DisableSidePadding="true">
    <DialogContent>
        <MudContainer Style="max-height: 550px; overflow-y: scroll" Fixed="true" MaxWidth="MaxWidth.Medium">

            <CascadingValue Value="this">


                <MudForm Model="Model" @ref="form">

                    <MudTabs Elevation="2" Rounded="true" ApplyEffectsToContainer="true" PanelClass="pa-6">
                        <MudTabPanel Text="Name">
                            <MudGrid>

                                <MudItem xs="12" sm="6">
                                    <MWOItemChapterComponent></MWOItemChapterComponent>
                                </MudItem>
                                <MudItem xs="12" sm="6">
                                    <MWOItemExpensesComponent></MWOItemExpensesComponent>
                                </MudItem>

                            </MudGrid>
                        </MudTabPanel>
                        <MudTabPanel Text="Specs">
                            @if (Model.Chapter != null)
                            {
                                switch (Model.Chapter?.Id)
                                {
                                    case 4:
                                        <MWOItemEquipmentComponent></MWOItemEquipmentComponent>
                                        
                                        break;
                                    case 7:
                                        <MWOItemInstrumentComponent></MWOItemInstrumentComponent>

                                        break;
                                    case 6:
                                        <MWOItemPipingComponent></MWOItemPipingComponent>

                                        break;
                                }
                            }

                        </MudTabPanel>
                      
                        <MudTabPanel Text="Nozzles">
                            @if (Model.Id != 0 && Model.Chapter != null)
                            {
                                switch (Model.Chapter?.Id)
                                {
                                    case 4:
                                        <NozzleList @bind-Nozzles="@Model.EquipmentItem.Nozzles"
                                        UpdateParentList="UpdateFormFromChild" Master="@Model.EquipmentItem"></NozzleList>

                                        break;
                                    case 7:
                                        <NozzleList @bind-Nozzles="@Model.InstrumentItem.Nozzles"
                                        UpdateParentList="UpdateFormFromChild" Master="@Model.InstrumentItem"></NozzleList>

                                        break;
                                    case 6:
                                        <NozzleList @bind-Nozzles="@Model.PipingItem.Nozzles"
                                        UpdateParentList="UpdateFormFromChild" Master="@Model.PipingItem"></NozzleList>

                                        break;
                                }
                            }
                        </MudTabPanel>
                        <MudTabPanel Text="Process Conditions">
                            @if (Model.Id != 0 && Model.Chapter != null)
                            {
                                switch (Model.Chapter?.Id)
                                {
                                    case 4:
                                        <MWOItemProcessConditions @bind-ProcessCondition="@Model.EquipmentItem.eProcessCondition"
                                                      @bind-ProcessFluid=@Model.EquipmentItem.eProcessFluid></MWOItemProcessConditions>

                                        break;
                                    case 7:
                                        <MWOItemProcessConditions @bind-ProcessCondition="@Model.InstrumentItem.iProcessCondition"
                                                      @bind-ProcessFluid=@Model.InstrumentItem.iProcessFluid></MWOItemProcessConditions>

                                        break;
                                    case 6:
                                        <MWOItemProcessConditions @bind-ProcessCondition="@Model.PipingItem.pProcessCondition"
                                                      @bind-ProcessFluid=@Model.PipingItem.pProcessFluid></MWOItemProcessConditions>

                                        break;
                                   
                                }
                            }
                        </MudTabPanel>
                    </MudTabs>
                    <MudGrid>



                    </MudGrid>

                </MudForm>
            </CascadingValue>


        </MudContainer>
    </DialogContent>
    <DialogActions>

        <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="ml-auto" OnClick="Submit">Save</MudButton>

        <MudButton Variant="Variant.Filled" DisableElevation="true" OnClick="Cancel">Cancel</MudButton>
    </DialogActions>
</MudDialog>
@code {

}
