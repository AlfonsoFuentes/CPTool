@page "/"
@page "/mwolist"
@using CPTool.Application.Features.MWOFeatures
@using CPTool.Application.Features.MWOItemFeatures.Query.GetById

@if (ShowAddButton)
{
    <OneToManyListComponent TMaster="EditMWO" TDetail="EditMWOItem"
                        TDeleteMaster="DeleteMWO" TDeleteDetail="DeleteMWOItem"
                        TMasterList="GetMWOListQuery" TDetailList="GetMWOItemListQuery"
                        TMasterGedById="GetByIdMWOQuery" TDetailGedById="GetByIdMWOItemQuery"
                        @bind-ElementsMasters="@GlobalTables.MWOs"
                        @bind-GlobalElementsDetails=@GlobalTables.MWOItems
                        ElementsDetails="@SelectedMaster.MWOItems"
                        @bind-SelectedMaster="@SelectedMaster"
                        @bind-SelectedDetail="@SelectedDetail"
                        OnShowDialogMaster="ToolDialogService.ShowMWO"
                        OnShowDialogDetails="ToolDialogService.ShowMWOItem">
        <MasterOtherButtons>
            <MudTooltip Text="Create Purchase Order">
                <MudIconButton Icon="@Icons.Filled.CurrencyExchange" OnClick="AddPurchaseOrder" Size="Size.Small" Disabled=@(SelectedMaster.Id==0?true:false) />
            </MudTooltip>
        </MasterOtherButtons>
        <MasterContextTh>
            <MudTh Style="width:40px">#</MudTh>
            <MudTh Style="width:40px">Name</MudTh>
            <MudTh Style="width:40px">CEC#</MudTh>
        </MasterContextTh>
        <MasterContextTd>
            <MudTd DataLabel="#">@context.Id</MudTd>
            <MudTd DataLabel="Name">@context.Name</MudTd>

            <MudTd DataLabel="CEC">@context.CECName</MudTd>
        </MasterContextTd>
        <DetailContextTh>
            <MudTh Style="width:40px">#</MudTh>
            <MudTh Style="width:40px">Tag                     </MudTh>
            <MudTh Style="width:40px">Name</MudTh>

        </DetailContextTh>
        <DetailContextTd>
          
            <MudTd DataLabel="#">@context.Nomenclatore</MudTd>
            <MudTd DataLabel="Tag">@context.TagId</MudTd>
            <MudTd DataLabel="Name">@context.Name</MudTd>


        </DetailContextTd>

    </OneToManyListComponent>

}

@code {




    public bool ShowAddButton { get; set; } = true;


    int mastersm => 6;
    int detailsm => 6;
}
@*   SearchFuncMaster="FilterFuncEqu" SearchFuncDetails="FilterFuncEquSub"*@